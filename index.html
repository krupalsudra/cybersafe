<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validation Form</title>
    <script>
        async function validateInput() {
            const email = document.getElementById("email").value.trim();
            const phone = document.getElementById("phone").value.trim();
            const website = document.getElementById("url").value.trim();
            let queryParams = [];

            if (email) queryParams.push(`email=${encodeURIComponent(email)}`);
            if (phone) queryParams.push(`phone=${encodeURIComponent(phone)}`);
            if (website) queryParams.push(`url=${encodeURIComponent(website)}`);

            if (queryParams.length === 0) {
                showResult("❌ Please enter email, phone, or URL!", "error");
                return;
            }

            try {
                const response = await fetch(`http://localhost:8000/?${queryParams.join("&")}`);
                const data = await response.json();
                showResult(data.message, data.status);
            } catch (error) {
                showResult("❌ Server error. Please try again later.", "error");
            }
        }

        function showResult(message, status) {
            const result = document.getElementById("result");
            result.innerText = message;
            result.style.color = status === "safe" ? "green" : "red";
        }
    </script>
</head>
<body>
    <h2>Validation Form</h2>

    <label for="email">Email:</label>
    <input type="email" id="email" placeholder="Enter email">

    <label for="phone">Phone Number:</label>
    <input type="text" id="phone" placeholder="Enter a 10-digit phone number" pattern="[0-9]{10}" maxlength="10">

    <label for="url">Website URL:</label>
    <input type="url" id="url" placeholder="Enter website URL">

    <button onclick="validateInput()">Validate</button>

    <p id="result"></p>
</body>
</html>
